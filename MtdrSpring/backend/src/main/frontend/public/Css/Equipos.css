:root{
  /* Dark palette (como en notificaciones) */
  --bg:#0f1216;
  --panel:#0f1216;           /* fondo del contenedor top */
  --card:#12161c;
  --card-soft:#161b22;
  --ink:#e6e7ea;
  --ink-dim:#c8cbd2;
  --muted:#8a93a3;
  --line:#20242c;
  --brand:#E1261C;
  --brand-hover:#c41f15;

  --pill-bg:#151a21;
  --pill-on:#f44336;

  --chip-bg:#171d25;
  --chip-border:#2a3240;

  --ok:#16a34a;
  --danger:#ef4444;

  --ico-size:18px;
  --ico-size-sm:14px;
  --ico-color:#9aa3af;

  --bg-secondary:#090b10;
  --card-hover:#171d25;
  --transition-base:all .18s ease-out;

  --shadow-sm:0 2px 8px rgba(0,0,0,.35);
  /* added new shadow and spacing variables for better design consistency */
  --shadow-md:0 4px 12px rgba(0,0,0,.4);
  --shadow-lg:0 8px 24px rgba(0,0,0,.5);
  --radius-sm:8px;
  --radius-md:12px;
  --radius-lg:18px;

  /* Roles */
  --role-user:#f59e0b;     /* naranja */
  --role-super:#dc2626;    /* rojo */
  --role-admin:#facc15;    /* amarillo */
}

/* Reset */
* {
  box-sizing: border-box;
}
html,
body {
  margin: 0;
  padding: 0;
  height: 100%;
}
body {
  font-family: system-ui, ui-sans-serif, -apple-system, Segoe UI, Roboto, Arial, "Noto Sans", sans-serif;
  background: var(--bg);
  color: var(--ink);
  /* Added subtle background gradient for depth */
  background: linear-gradient(135deg, #0a0d10 0%, #0f1216 50%, #13161d 100%);
  /* added scroll behavior for smoother scrolling */
  scroll-behavior: smooth;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* Topbar */
.topbar {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  height: 52px;
  /* Subtle gradient background for topbar */
  background: linear-gradient(180deg, #0c0f12 0%, #09070f 100%);
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 18px;
  z-index: 30;
  border-bottom: 1px solid var(--line);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.4);
  /* Smooth transition for interactions */
  transition: box-shadow .2s ease;
  /* added backdrop-filter for modern glassmorphism effect */
  backdrop-filter: blur(8px);
}
.topbar:hover {
  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.5);
}
.logo-text {
  font-family: "Panchang", system-ui;
  font-weight: 800;
  font-size: 32px;
  letter-spacing: .08em;
  color: var(--brand);
  text-transform: uppercase;
  transform: scaleX(1.15);
  /* Added text shadow for depth */
  text-shadow: 0 2px 8px rgba(225, 38, 28, 0.2);
  transition: text-shadow .3s ease;
  /* improved focus state for accessibility */
  outline: 2px solid transparent;
  outline-offset: 2px;
}
.logo-text:hover {
  text-shadow: 0 2px 12px rgba(225, 38, 28, 0.35);
}
.logo-text:focus {
  outline-color: var(--brand);
}
.topbar-right {
  display: flex;
  align-items: center;
  gap: 10px;
}
.user-circle {
  width: 32px;
  height: 32px;
  border-radius: 50%;
  background: var(--brand);
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 900;
  /* Added shadow and transition for user circle */
  box-shadow: 0 4px 12px rgba(225, 38, 28, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.1);
  transition: transform .2s ease, box-shadow .2s ease;
  /* improved focus state */
  outline: 2px solid transparent;
  outline-offset: 2px;
}
.user-circle:hover {
  transform: scale(1.05);
  box-shadow: 0 6px 16px rgba(225, 38, 28, 0.4);
}
.user-circle:focus {
  outline-color: var(--brand);
}
.logout-btn {
  background: #232831;
  border: 1px solid var(--line);
  color: var(--ink);
  padding: 6px 12px;
  border-radius: 10px;
  text-decoration: none;
  /* Added transitions and hover effects */
  transition: all .2s ease;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
  /* added focus state for accessibility */
  outline: 2px solid transparent;
  outline-offset: -1px;
}
.logout-btn:hover {
  background: #2a303a;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
  transform: translateY(-1px);
}
.logout-btn:focus {
  outline-color: var(--brand);
}

/* Layout */
.app {
  display: grid;
  grid-template-columns: 260px minmax(0, 1fr);
  min-height: 100dvh;
  padding-top: 52px;
}

.aside {
  background: var(--bg-secondary);
  color: #d8dbe2;
  border-right: 1px solid var(--line);
  position: sticky;
  top: 52px;
  height: calc(100vh - 52px);
  padding: 20px 12px;
  overflow-y: auto;
  box-shadow: inset -2px 0 6px rgba(0, 0, 0, 0.2);
  /* improved scrollbar styling for better UX */
}
.aside::-webkit-scrollbar {
  width: 6px;
}
.aside::-webkit-scrollbar-track {
  background: transparent;
}
.aside::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.1);
  border-radius: 3px;
}
.aside::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.2);
}

.menu {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.mi {
  display: flex;
  gap: 10px;
  align-items: center;
  color: #b0b8c3;
  text-decoration: none;
  border-radius: 10px;
  padding: 12px 12px;
  transition: var(--transition-base);
  position: relative;
  /* added focus state for keyboard navigation */
  outline: 2px solid transparent;
  outline-offset: -2px;
}

.mi:hover {
  background: var(--card-hover);
  color: #e0e3eb;
  transform: translateX(2px);
}

.mi:focus {
  outline-color: var(--brand);
}

.mi.active {
  background: linear-gradient(90deg, rgba(225, 38, 28, 0.2) 0%, transparent 100%);
  color: #fff;
  box-shadow: inset 0 0 0 1.5px rgba(225, 38, 28, 0.4);
}

.mi.active::before {
  content: "";
  position: absolute;
  left: 0;
  top: 50%;
  transform: translateY(-50%);
  width: 3px;
  height: 24px;
  background: var(--brand);
  border-radius: 0 2px 2px 0;
  box-shadow: 0 0 8px rgba(225, 38, 28, 0.4);
}

.ico {
  width: var(--ico-size);
  height: var(--ico-size);
  color: #8e97a6;
  display: inline-block;
  transition: var(--transition-base);
  /* added flex-shrink to prevent icon squishing */
  flex-shrink: 0;
}

.mi:hover .ico {
  color: var(--brand);
}

.main {
  padding: 18px 22px;
  background: var(--bg);
  /* improved scrollbar styling for main content */
}
.main::-webkit-scrollbar {
  width: 6px;
}
.main::-webkit-scrollbar-track {
  background: transparent;
}
.main::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.1);
  border-radius: 3px;
}
.main::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.2);
}

/* Main / contenido */
.card{
  background:var(--card);
  border:1px solid var(--line);
  border-radius:18px;
  padding:18px;
  box-shadow:var(--shadow-sm);
  margin-bottom:16px;
  /* improved hover effect for better interactivity */
  transition: all .2s ease;
}
.card:hover {
  box-shadow: var(--shadow-md);
  border-color: rgba(225, 38, 28, 0.3);
}
.card-soft{
  background:linear-gradient(180deg,#171b21 0%,#101319 100%);
}
.h4{
  font-weight:900;
  font-size:clamp(20px,3vw,28px);
  margin:0 0 6px 0;
  /* improved line-height for better readability */
  line-height: 1.3;
}
.muted{
  color:var(--muted);
  margin-bottom:12px;
}

/* Iconos */
.ico{
  width:var(--ico-size);
  height:var(--ico-size);
  color:var(--ico-color);
  display:inline-block;
}
.ico-sm{
  width:var(--ico-size-sm);
  height:var(--ico-size-sm);
  color:var(--ico-color);
  display:inline-block;
}
.with-icon{
  display:inline-flex;
  align-items:center;
  gap:.5rem;
}

/* Botones */
.btn-red{
  background:var(--brand);
  color:#fff;
  font-weight:700;
  padding:8px 12px;
  border:none;
  border-radius:10px;
  cursor:pointer;
  box-shadow:var(--shadow-sm);
  /* added transitions and focus state */
  transition: all .2s ease;
  outline: 2px solid transparent;
  outline-offset: 2px;
}
.btn-red:hover {
  background:var(--brand-hover);
  box-shadow: var(--shadow-md);
  transform: translateY(-1px);
}
.btn-red:focus {
  outline-color: var(--brand);
}
.btn-red:disabled {
  opacity:.5;
  cursor:not-allowed;
  transform: none;
}

.btn-ghost{
  background:#151a21;
  color:var(--ink);
  font-weight:700;
  padding:8px 12px;
  border:none;
  border-radius:10px;
  cursor:pointer;
  /* added transitions and focus state */
  transition: all .2s ease;
  outline: 2px solid transparent;
  outline-offset: 2px;
}
.btn-ghost:hover {
  background:#171d25;
  box-shadow: var(--shadow-sm);
}
.btn-ghost:focus {
  outline-color: var(--ink-dim);
}
.btn-ghost.danger{
  background:#1a1214;
  color:#fca5a5;
}
.btn-ghost.danger:hover {
  background: rgba(252, 165, 165, 0.1);
  box-shadow: inset 0 0 0 1px rgba(252, 165, 165, 0.3);
}

/* Modal genérico */
.modal-backdrop{
  position:fixed;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  background:rgba(3,4,7,.78);
  z-index:3000;
  padding:20px;
  /* added backdrop-filter for modern effect */
  backdrop-filter: blur(4px);
  animation: fadeIn .2s ease;
}
@keyframes fadeIn {
  from {
    opacity: 0;
    backdrop-filter: blur(0);
  }
  to {
    opacity: 1;
    backdrop-filter: blur(4px);
  }
}
.modal-card{
  width:min(620px,96vw);
  background:var(--card);
  border-radius:18px;
  /* added animation and improved shadow */
  animation: slideUp .2s ease;
  box-shadow: var(--shadow-lg);
  border: 1px solid var(--line);
}
@keyframes slideUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}
.form-grid{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:12px;
  margin-top:8px;
}
.form-grid .full{grid-column:1/-1;}
.form-grid input,
.form-grid textarea,
.form-grid select{
  width:100%;
  padding:10px;
  border:1px solid var(--line);
  border-radius:10px;
  font-size:14px;
  background:#0f1216;
  color:var(--ink);
  /* added transitions and focus state */
  transition: all .2s ease;
  outline: 2px solid transparent;
  outline-offset: -1px;
}
.form-grid input:focus,
.form-grid textarea:focus,
.form-grid select:focus {
  border-color: var(--brand);
  outline-color: rgba(225, 38, 28, 0.3);
  box-shadow: 0 0 0 3px rgba(225, 38, 28, 0.1);
}
.form-grid textarea{min-height:90px;}
.modal-actions{
  grid-column:1/-1;
  display:flex;
  justify-content:flex-end;
  gap:8px;
  margin-top:8px;
}

/* Toast */
.toast{
  position:fixed;
  left:50%;
  top:70px;
  transform:translateX(-50%);
  padding:12px 16px;
  border-radius:10px;
  color:#fff;
  font-weight:700;
  z-index:4000;
  box-shadow:0 6px 20px rgba(0,0,0,.4);
  /* added animation for toast entrance */
  animation: slideDown .3s ease;
}
@keyframes slideDown {
  from {
    opacity: 0;
    transform: translateX(-50%) translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateX(-50%) translateY(0);
  }
}
.toast-error{background:#b42318;}
.toast-ok{background:#16a34a;}

/* Team card */
.team-card{
  padding:0;
  overflow:hidden;
  background:var(--card);
  border-radius:18px;
  border:1px solid var(--line);
  /* improved hover effect */
  transition: all .2s ease;
}
.team-card:hover {
  box-shadow: var(--shadow-md);
  border-color: rgba(225, 38, 28, 0.3);
}
.team-header{
  display:flex;
  align-items:flex-start;
  justify-content:space-between;
  gap:12px;
  padding:16px;
  cursor:pointer;
  /* added transition for smooth collapse/expand */
  transition: background .2s ease;
}
.team-header:hover {
  background: rgba(255, 255, 255, 0.02);
}
.team-header-left .team-title{
  margin:0;
  font-size:18px;
  font-weight:900;
  color:var(--ink);
  /* improved line-height */
  line-height: 1.3;
}
.team-header-right{
  display:flex;
  gap:8px;
  align-items:center;
}
.team-header [data-toggle]{cursor:pointer;}
.team-body{
  padding:0 16px 16px;
}
.chev{
  font-weight:900;
  opacity:.7;
  /* added transition for smooth rotation */
  transition: transform .2s ease;
}
.team-body.collapsed .chev {
  transform: rotate(180deg);
}
.team-id{
  margin-left:8px;
  padding:2px 8px;
  border-radius:999px;
  font-size:12px;
  font-weight:800;
  color:var(--brand);
  background:#2a1514;
  border:1px solid #f3c5c1;
  vertical-align:middle;
}

/* Tabla miembros */
.table-wrap{
  overflow:auto;
  border:1px solid var(--line);
  border-radius:12px;
  background:var(--card);
  /* improved scrollbar styling */
}
.table-wrap::-webkit-scrollbar {
  height: 6px;
}
.table-wrap::-webkit-scrollbar-track {
  background: transparent;
}
.table-wrap::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.1);
  border-radius: 3px;
}
.table-wrap::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.2);
}
.table{
  width:100%;
  border-collapse:separate;
  border-spacing:0;
}
.table thead th{
  text-align:left;
  font-size:12px;
  color:var(--muted);
  font-weight:800;
  padding:10px 12px;
  background:#171b21;
  border-bottom:1px solid var(--line);
  /* improved sticky header for scrolling */
  position: sticky;
  top: 0;
  z-index: 10;
}
.table tbody td{
  padding:10px 12px;
  border-bottom:1px solid var(--line);
  font-size:14px;
  color:var(--ink);
  /* added transition for hover effect */
  transition: background .2s ease;
}
.table tbody tr:hover td {
  background: rgba(255, 255, 255, 0.02);
}
.table tbody tr:last-child td{border-bottom:none;}
.ta-right{text-align:right;}

/* Usuario (avatar + nombre + dot de rol) */
.user-cell{
  display:flex;
  align-items:center;
  gap:10px;
}
.avatar{
  width:28px;
  height:28px;
  border-radius:50%;
  background:#111827;
  color:#fff;
  display:flex;
  align-items:center;
  justify-content:center;
  font-weight:800;
  font-size:13px;
  /* added flex-shrink and improved shadow */
  flex-shrink: 0;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
}
.user-name{
  display:inline-flex;
  align-items:center;
  gap:8px;
}

/* Tags de rol (badges) */
.tag{
  display:inline-flex;
  align-items:center;
  gap:6px;
  padding:4px 10px;
  border-radius:999px;
  font-size:12px;
  font-weight:800;
  border:1px solid transparent;
  /* improved transition */
  transition: all .2s ease;
}
.tag-admin{
  background:#fff7cc1a;
  border-color:#f2e59955;
  color:#facc15;
}
.tag-super{
  background:#7f1d1d33;
  border-color:#f8717177;
  color:#fecaca;
}
.tag-user{
  background:#111827;
  border-color:#4b5563;
  color:#e5e7eb;
}

/* Dot de rol junto al nombre */
.role-dot{
  width:8px;
  height:8px;
  border-radius:999px;
  display:inline-block;
  box-shadow:0 0 0 2px #020617;
  /* added animation for visual feedback */
  animation: pulse 2s infinite;
  flex-shrink: 0;
}
@keyframes pulse {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.7;
  }
}
.dot-user{background:var(--role-user);}
.dot-super{background:var(--role-super);}
.dot-admin{background:var(--role-admin);}

/* Acciones de rol */
.role-actions{
  display:flex;
  flex-wrap:wrap;
  gap:8px;
  justify-content:flex-end;
}
.btn-role{
  display:inline-flex;
  align-items:center;
  gap:6px;
  font-weight:800;
  padding:8px 12px;
  border:none;
  border-radius:10px;
  cursor:pointer;
  color:#e5e7eb;
  background:#020617;
  box-shadow:var(--shadow-sm);
  /* added transitions and focus state */
  transition: all .2s ease;
  outline: 2px solid transparent;
  outline-offset: 2px;
}
.btn-role:focus {
  outline-color: currentColor;
}
.btn-role .ico-sm{color:inherit;}

.role-user{
  background:rgba(245,158,11,.12);
  border:1px solid rgba(245,158,11,.5);
  color:#fbbf24;
}
.role-user:hover {
  background: rgba(245, 158, 11, 0.2);
  box-shadow: 0 0 8px rgba(245, 158, 11, 0.3);
}
.role-super{
  background:rgba(220,38,38,.16);
  border:1px solid rgba(220,38,38,.6);
  color:#fecaca;
}
.role-super:hover {
  background: rgba(220, 38, 38, 0.24);
  box-shadow: 0 0 8px rgba(220, 38, 38, 0.4);
}
.role-admin{
  background:rgba(250,204,21,.18);
  border:1px solid rgba(250,204,21,.7);
  color:#facc15;
}
.role-admin:hover {
  background: rgba(250, 204, 21, 0.26);
  box-shadow: 0 0 8px rgba(250, 204, 21, 0.4);
}
.btn-role.current{
  outline:2px solid currentColor;
  outline-offset: 0;
}

/* Confirm modal (borrar usuario/equipo) */
.confirm-card{
  max-width:480px;
  text-align:center;
  background:var(--card);
  border-radius:18px;
  border:1px solid var(--line);
  padding:20px 18px;
  /* improved shadow and animation */
  box-shadow: var(--shadow-lg);
  animation: slideUp .2s ease;
}
.confirm-icon{
  display:flex;
  justify-content:center;
  margin-bottom:8px;
}
.ico-lg{
  width:36px;
  height:36px;
  color:#b42318;
}

/* added utility classes for better reusability */
.text-balance {
  text-wrap: balance;
}

.truncate {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.line-clamp-2 {
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.spinner {
 width: 44px;
 height: 44px;
 animation: spinner-y0fdc1 2s infinite ease;
 transform-style: preserve-3d;
}

.spinner > div {
 background-color: rgba(255, 0, 21, 0.2);
 height: 100%;
 position: absolute;
 width: 100%;
 border: 2px solid #ff002f;
}

.spinner div:nth-of-type(1) {
 transform: translateZ(-22px) rotateY(180deg);
}

.spinner div:nth-of-type(2) {
 transform: rotateY(-270deg) translateX(50%);
 transform-origin: top right;
}

.spinner div:nth-of-type(3) {
 transform: rotateY(270deg) translateX(-50%);
 transform-origin: center left;
}

.spinner div:nth-of-type(4) {
 transform: rotateX(90deg) translateY(-50%);
 transform-origin: top center;
}

.spinner div:nth-of-type(5) {
 transform: rotateX(-90deg) translateY(50%);
 transform-origin: bottom center;
}

.spinner div:nth-of-type(6) {
 transform: translateZ(22px);
}

@keyframes spinner-y0fdc1 {
 0% {
  transform: rotate(45deg) rotateX(-25deg) rotateY(25deg);
 }

 50% {
  transform: rotate(45deg) rotateX(-385deg) rotateY(25deg);
 }

 100% {
  transform: rotate(45deg) rotateX(-385deg) rotateY(385deg);
 }
}

/* El main será el "contenedor relativo" del loader */
.main {
  position: relative;
}

/* Loader centrado solo en el área de contenido, no tapa topbar ni sidebar */
.page-loader {
  position: absolute;
  inset: 0; /* top:0; right:0; bottom:0; left:0; */
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  z-index: 20;
  /* fondo suave opcional para diferenciar mientras carga */
  background: radial-gradient(circle at center, rgba(0,0,0,0.6) 0%, rgba(0,0,0,0.8) 100%);
}

.loader-text {
  margin-top: 14px;
  font-size: 0.9rem;
  color: var(--ink-dim);
}
